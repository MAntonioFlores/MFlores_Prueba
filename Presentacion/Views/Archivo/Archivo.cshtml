@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<h2>Carga Archivo</h2>

<div class="container">
    @using (Html.BeginForm("Archivo", "Archivo", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <div style="margin-top: 50px">
            <input type="file" name="ArchivoCSV" id="ArchivoCSV" onchange="Validar(event.target.files)"/>
            <button type="submit" class="btn btn-success">Cargar</button>

        </div>
    }

    @* <div class="container">
        <div style="margin-top: 50px">
            @if (HttpContext.Session.SetString("DownloadPath") != null)
            {
                <div col-md-1>
                    @Html.ActionLink("Dowload log .txt", "Dowloard", "Archivo", htmlAttributes: new { @class = "btn btn-danger" })
                </div>
            }
        </div>
    </div> *@

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script>  

function Validar(files) {
        var extensionesPermitidas = ['csv'];
        console.log(document.getElementById("ArchivoCSV").files);
        var extensionArchivo = files[0].name.split('.').pop().toLowerCase();
        var isValidFile = false; //saber si es valida o no es valida

        for (var index in extensionesPermitidas) {
            if (extensionArchivo === extensionesPermitidas[index]) {
                isValidFile = true;
                break;
            }
        }
        if (!isValidFile) {
            alert('Las extensiones permitidas son : *.' + extensionesPermitidas.join(', *.'));
            $("#ArchivoCSV").val("")
        }
        console.log(document.getElementById("ArchivoCSV"));
        return isValidFile;
    }
</script>
</div>
